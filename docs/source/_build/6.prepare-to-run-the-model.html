
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Preparing to run the model &#8212; SUEWS 2018a documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">SUEWS 2018a documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="preparing-to-run-the-model">
<h1>Preparing to run the model<a class="headerlink" href="#preparing-to-run-the-model" title="Permalink to this headline">¶</a></h1>
<p>The following is to help with the model setup. Note that there is a
version of SUEWS in <a class="reference external" href="http://urban-climate.net/umep/UMEP_Manual">UMEP</a>
and there are some starting
<a class="reference external" href="http://urban-climate.net/umep/UMEP_Manual#Tutorials">tutorials</a> for
that. The version there is the same (i.e. the executable) as the
standalone version so you can swap to that later once you have some
familiarity.</p>
<div class="section" id="preparatory-reading">
<h2>Preparatory reading<a class="headerlink" href="#preparatory-reading" title="Permalink to this headline">¶</a></h2>
<p>Read the manual and relevant papers (and references therein):</p>
<ul class="simple">
<li>Järvi L, Grimmond CSB &amp; Christen A (2011) The Surface Urban Energy
and Water Balance Scheme (SUEWS): Evaluation in Los Angeles and
Vancouver. J. Hydrol. 411, 219-237.
<a class="reference external" href="http://www.sciencedirect.com/science/article/pii/S0022169411006937">doi:10.1016/j.jhydrol.2011.10.00</a></li>
<li>Järvi L, Grimmond CSB, Taka M, Nordbo A, Setälä H &amp; Strachan IB
(2014) Development of the Surface Urban Energy and Water balance
Scheme (SUEWS) for cold climate cities. Geosci. Model Dev. 7,
1691-1711.
<a class="reference external" href="http://www.geosci-model-dev.net/7/1691/2014/">doi:10.5194/gmd-7-1691-2014</a></li>
<li>Ward HC, Kotthaus S, Järvi L and Grimmond CSB (2016) Surface Urban
Energy and Water Balance Scheme (SUEWS): development and evaluation
at two UK sites. Urban Climate 18, 1-32.
<a class="reference external" href="http://www.sciencedirect.com/science/article/pii/S2212095516300256/">doi:10.1016/j.uclim.2016.05.001</a></li>
</ul>
<p><a class="reference external" href="http://urban-climate.net/umep/SUEWS#Recent_publications">See other publications with example
applications</a></p>
</div>
<div class="section" id="decide-what-type-of-model-run-you-are-interested-in">
<h2>Decide what type of model run you are interested in<a class="headerlink" href="#decide-what-type-of-model-run-you-are-interested-in" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="62%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">Available in this release</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>LUMPS</td>
<td>Yes – not standalone</td>
</tr>
<tr class="row-odd"><td>SUEWS at a point or for an individual area</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>SUEWS for multiple grids or areas</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>SUEWS with Boundary Layer (BL)</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>SUEWS with snow</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>SUEWS with SOLWEIG</td>
<td>No</td>
</tr>
<tr class="row-even"><td>SUEWS with SOLWEIG and BL</td>
<td>No</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="download-the-program-and-example-data-files">
<h2>Download the program and example data files<a class="headerlink" href="#download-the-program-and-example-data-files" title="Permalink to this headline">¶</a></h2>
<p>Visit the website to receive a link to download the program and example
data files. Select the appropriate compiled version of the model to
download. For windows there is an installation version which will put
the programs and all the files into the appropriate place. There is also
a version linked to QGIS:
<a class="reference external" href="http://urban-climate.net/umep/UMEP">**UMEP**</a>.</p>
<p>Note, as the definition of long double precision varies between
computers (e.g. Mac vs Windows) slightly different results may occur in
the output files.</p>
<p>Test/example files are given for the London KCL site, 2011 data (denoted
Kc11)</p>
<p>In the following SS is the site code (e.g. Kc), ss the grid ID, YYYY the
year and tt the time interval.</p>
<p>(+) There is a second file InitialConditionsSSss_YYYY_EndOfRun.nml or
InitialConditionsSSss_YYYY+1.nml in the input directory. At the end of
the run, and at the end of each year of the run, these files are written
out so that this information could be used to initialize further model
runs.</p>
</div>
<div class="section" id="run-the-model-for-example-data">
<h2>Run the model for example data<a class="headerlink" href="#run-the-model-for-example-data" title="Permalink to this headline">¶</a></h2>
<p>Before running the model for your own data it is good to make certain
that you can run the test data and get the same results as in the
example files provided. It is recommended that you make a copy of the
example output files and put them somewhere else so you can compare the
results. When you run the program it will write over the supplied files.</p>
<p>To run the model you can use <strong>Command Prompt</strong> (in the directory where
the programme is located type the model name) or just double click the
executable file.</p>
<p>Please see <a class="reference external" href="#Troubleshooting">Troubleshooting</a> if you have problems
running the model.</p>
</div>
<div class="section" id="preparation-of-data">
<h2>Preparation of data<a class="headerlink" href="#preparation-of-data" title="Permalink to this headline">¶</a></h2>
<p>This section describes the information required to run SUEWS for your
site. The input data can be summarised as follows:</p>
<ol class="arabic simple">
<li>Continuous <em>meteorological forcing data</em> for the entire period to be
modelled. Note you can not have gaps in the meteorological data. If
you need help with preparing the data you may want to use some of the
tools in
<a class="reference external" href="http://urban-climate.net/umep/UMEP_Manual#Meteorological_Data:_MetPreprocessor">UMEP</a>.</li>
<li>Knowledge of the <em>surface and soil conditions immediately before the
start of the run</em> (if these initial conditions are not known, it is
usually possible to determine suitable values by running the model
and using the output at the end of the run to infer the conditions at
the start of the run).</li>
<li>The <em>location of the site</em> (latitude, longitude, altitude).</li>
<li>Information about the <em>characteristics of the surface</em>, including
land cover, heights of buildings and trees, radiative characteristics
(e.g. albedo, emissivity), drainage characteristics, soil
characteristics, snow characteristics, phenological characteristics
(e.g. seasonal cycle of LAI).</li>
<li>Information about <em>human behaviour</em>, including energy use and water
use (e.g. for irrigation or street cleaning) and snow clearing (if
applicable). The anthropogenic energy use and water use may be
provided as a time series in the meteorological forcing file if these
data are available or modelled based on parameters provided to the
model, including population density, hourly and weekly profiles of
energy and water use, information about the proportion of properties
using irrigation and the type of irrigation (automatic or manual).</li>
</ol>
<p>It is particularly important to ensure the following input information
is appropriate and representative of the site:</p>
<ul class="simple">
<li>Fractions of different land cover types and (less so) heights of
buildings <a href="#id9"><span class="problematic" id="id1">[28]_</span></a></li>
<li>Accurate meteorological forcing data, particularly precipitation and
incoming shortwave radiation <a href="#id10"><span class="problematic" id="id2">[29]_</span></a></li>
<li>Initial soil moisture conditions <a href="#id11"><span class="problematic" id="id3">[30]_</span></a></li>
<li>Anthropogenic heat flux parameters, particularly if there are
considerable energy emissions from transport, buildings, metabolism,
etc <a href="#id12"><span class="problematic" id="id4">[31]_</span></a></li>
<li>External water use (if irrigation or street cleaning occurs)</li>
<li>Snow clearing (if running the snow option)</li>
<li>Surface conductance parameterisation <a href="#id13"><span class="problematic" id="id5">[32]_</span></a> <a href="#id14"><span class="problematic" id="id6">[33]_</span></a></li>
</ul>
<p>SUEWS can be run either for an individual area or for multiple areas.
There is no requirement for the areas to be of any particular shape but
here we refer to them as model ‘grids’.</p>
<div class="section" id="preparation-of-site-characteristics-and-model-parameters">
<h3>Preparation of site characteristics and model parameters<a class="headerlink" href="#preparation-of-site-characteristics-and-model-parameters" title="Permalink to this headline">¶</a></h3>
<p>The area to be modelled is described by a set of characteristics that
are specified in the <a class="reference external" href="#SUEWS_SiteSelect.txt">SUEWS_SiteSelect.txt</a>
file. Each row corresponds to one model grid for one year (i.e. running
a single grid over three years would require three rows; running two
grids over two years would require four rows). Characteristics are often
selected by a code for a particular set of conditions. For example, a
specific soil type (links to <a class="reference external" href="#SUEWS_Soil.txt">SUEWS_Soil.txt</a>) or
characteristics of deciduous trees in a particular region (links to
<a class="reference external" href="#SUEWS_Veg.txt">SUEWS_Veg.txt</a>). The intent is to build a library of
characteristics for different types of urban areas. The codes are
specified by the user, must be integer values and must be unique within
the first column of each input file, otherwise the model will return an
error. (Note in <a class="reference external" href="#SUEWS_SiteSelect.txt">SUEWS_SiteSelect.txt</a> the
first column is labelled ‘Grid’ and can contain repeat values for
different years.) See <a class="reference external" href="#Input_files">Input files</a> for details. Note
<a class="reference external" href="http://urban-climate.net/umep/UMEP">UMEP</a> maybe helpful for
components of this.</p>
<div class="section" id="land-cover">
<h4>Land cover<a class="headerlink" href="#land-cover" title="Permalink to this headline">¶</a></h4>
<p>For each grid, the land cover must be classified using the following
surface types:</p>
<p>The surface cover fractions (i.e. proportion of the grid taken up by
each surface) must be specified in
<a class="reference external" href="#SUEWS_SiteSelect.txt">SUEWS_SiteSelect.txt</a>. The surface cover
fractions are <strong>critical</strong>, so make certain that the different surface
cover fractions are appropriate for your site.</p>
<p>For some locations, land cover information may be already available
(e.g. from various remote sensing resources). If not, websites like Bing
Maps and Google Maps allow you to see aerial images of your site and can
be used to estimate the relative proportion of each land cover type. If
detailed spatial datasets are available,
<a class="reference external" href="http://urban-climate.net/umep/UMEP">UMEP</a> allows for a direct link
to a GIS environment using QGIS.</p>
</div>
<div class="section" id="anthropogenic-heat-flux-q-sub-f">
<span id="anthropogenic-heat-flux-qf-1"></span><h4>Anthropogenic heat flux (Q:sub:<cite>F</cite>)<a class="headerlink" href="#anthropogenic-heat-flux-q-sub-f" title="Permalink to this headline">¶</a></h4>
<p>You can either model Q<sub>F</sub> within SUEWS or provide it as an input.</p>
<ul class="simple">
<li>To model it population density is needed as an input for LUMPS and
SUEWS to calculate Q<sub>F</sub>.</li>
<li>If you have no information about the population of the site we
recommend that you use the LUCY model <a href="#id15"><span class="problematic" id="id7">[34]_</span></a>  <a href="#id16"><span class="problematic" id="id8">[35]_</span></a> to estimate the
anthropogenic heat flux which can then be provided as input SUEWS
along with the meteorological forcing data. The LUCY model can be
downloaded from <a class="reference external" href="http://micromet.reading.ac.uk/">here</a>.</li>
</ul>
<p>Alternatively, you can use the updated version of LUCY called
<a class="reference external" href="http://urban-climate.net/umep/LQF_Manual">LQF</a>, which is included in
<a class="reference external" href="http://urban-climate.net/umep/UMEP">UMEP</a>.</p>
</div>
<div class="section" id="other-information">
<h4>Other information<a class="headerlink" href="#other-information" title="Permalink to this headline">¶</a></h4>
<p>The surface cover fractions and population density can have a major
impact on the model output. However, it is important to consider the
suitability of all parameters for your site. Using inappropriate
parameters may result in the model returning an error or, worse,
generating output that is simply not representative of your site. Please
read the section on <a class="reference external" href="#Input_files">Input files</a>. Recommended or
reasonable ranges of values are suggested for some parameters, along
with important considerations for how to select appropriate values for
your site.</p>
</div>
<div class="section" id="data-entry">
<h4>Data Entry<a class="headerlink" href="#data-entry" title="Permalink to this headline">¶</a></h4>
<p>To create the series of input text files describing the characteristics
of your site, there are three options:</p>
<ol class="arabic simple">
<li>Data can be entered directly into the input text files. The example
(.txt) files provide a template to create your own files which can be
edited with a <a class="reference external" href="#A_text_editor">text editor</a> directly.</li>
<li>Data can be entered into the spreadsheet <strong>SUEWS_SiteInfo.xlsm</strong> and
the input text files generated by running the macro.</li>
<li>Use [<a class="reference external" href="http://urban-climate.net/umep/UMEP">http://urban-climate.net/umep/UMEP</a>| UMEP].</li>
</ol>
<p><strong>To run the xlsm macro:</strong> Enter the data for your site into the xlsm
spreadsheet <strong>SUEWS_SiteInfo.xlsm</strong> and then use the macro to create the
text files which will appear the same directory.</p>
<p>If there is a problem</p>
<ul class="simple">
<li>Make sure none of the text files to be generated are open.</li>
<li>It is recommended to close the spreadsheet before running the actual
model code.</li>
</ul>
<p>Note that in all txt files:</p>
<ul class="simple">
<li>The first two rows are headers. The first row is the column number;
the second row is the column name.</li>
<li>The names and order of the columns should not be altered from the
templates, as these are checked by the model and errors will be
returned if particular columns cannot be found.</li>
<li>Since v2017a it is no longer necessary for the meteorological forcing
data to have two rows with -9 in column 1 as their last two rows.</li>
<li>“!” indicates a comment, so any text following “!” on the same line
will not be read by the model.</li>
<li>If data are unavailable or not required, enter the value -999 in the
correct place in the input file.</li>
<li>Ensure the units are correct for all input information. See <a class="reference external" href="#Input_files">Input
files</a> for a description of parameters.</li>
</ul>
<p>In addition to these text files, the following files are also needed to
run the model.</p>
</div>
</div>
<div class="section" id="preparation-of-the-runcontrol-file">
<h3>Preparation of the RunControl file<a class="headerlink" href="#preparation-of-the-runcontrol-file" title="Permalink to this headline">¶</a></h3>
<p>In the RunControl.nml file the site name (<a href="#id17"><span class="problematic" id="id18">SS_</span></a>) and directories for the
model input and output are given. This means <strong>before running</strong> the
model (even the with the example datasets) you must either</p>
<ol class="arabic simple">
<li>open the RunControl.nml file and edit the input and output file paths
and the site name (with a <a class="reference external" href="#A_text_editor">text editor</a>) so that
they are correct for your setup, or</li>
<li>create the directories specified in the RunControl.nml file</li>
</ol>
<p>From the given site identification the model identifies the input files
and generates the output files. For example if you specify</p>
<div class="line-block">
<div class="line"><strong>``FileOutputPath````````=````````“C:FolderNameSUEWSOutput”``</strong>``&nbsp;and&nbsp;use&nbsp;site&nbsp;code&nbsp;SS&nbsp;the&nbsp;model&nbsp;creates&nbsp;an&nbsp;output&nbsp;file``</div>
<div class="line"><strong>``C:FolderNameSUEWSOutputSSss_YYYY_TT.txt``</strong>``&nbsp;(remember&nbsp;to&nbsp;add&nbsp;the&nbsp;last&nbsp;backslash&nbsp;in&nbsp;windows&nbsp;and&nbsp;slash&nbsp;in&nbsp;Linux/Mac).``</div>
</div>
<p>If the file paths are not correct the program will return an error when
run (see <a class="reference external" href="#Error_messages:_problems.txt">error messages</a>) and write
the error to the problems.txt file.</p>
</div>
<div class="section" id="preparation-of-the-meteorological-forcing-data">
<h3>Preparation of the Meteorological forcing data<a class="headerlink" href="#preparation-of-the-meteorological-forcing-data" title="Permalink to this headline">¶</a></h3>
<p>The model time-step is specified in <a class="reference external" href="#RunControl.nml">RunControl.nml</a>
(5 min is highly recommended). If meteorological forcing data are not
available at this resolution, SUEWS has the option to downscale (e.g.
hourly) data to the time-step required. See details about the
<a class="reference external" href="#SSss_YYYY_data_tt.txt">meteorological forcing data</a> to learn more
about choices of data input. Each grid can have its own meteorological
forcing file, or a single file can be used for all grids. The forcing
data should be representative of the local-scale, i.e. collected (or
derived) above the height of the roughness elements (buildings and
trees).</p>
</div>
<div class="section" id="preparation-of-the-initialconditions-file">
<h3>Preparation of the InitialConditions file<a class="headerlink" href="#preparation-of-the-initialconditions-file" title="Permalink to this headline">¶</a></h3>
<p>Information about the surface state and meteorological conditions just
before the start of the run are provided in the Initial Conditions file.
At the very start of the run, each grid can have its own Initial
Conditions file, or a single file can be used for all grids. For details
see <a class="reference external" href="#InitialConditions">InitialConditions</a>.</p>
</div>
</div>
<div class="section" id="run-the-model-for-your-site">
<h2>Run the model for your site<a class="headerlink" href="#run-the-model-for-your-site" title="Permalink to this headline">¶</a></h2>
<p>To run the model you can use <strong>Command Prompt</strong> (in the directory where
the programme is located type the model name) or just double click the
executable file.</p>
<p>Please see <a class="reference external" href="#Troubleshooting">Troubleshooting</a> if you have problems
running the model.</p>
</div>
<div class="section" id="analyse-the-output">
<h2>Analyse the output<a class="headerlink" href="#analyse-the-output" title="Permalink to this headline">¶</a></h2>
<p>It is a good idea to perform initial checks that the model output looks
reasonable.</p>
</div>
<div class="section" id="summary-of-files">
<h2>Summary of files<a class="headerlink" href="#summary-of-files" title="Permalink to this headline">¶</a></h2>
<p>The table below lists the files required to run SUEWS and the output
files produced. SS is the two-letter code (specified in RunControl)
representing the site name, ss is the grid identification (integer
values between 0 and 2,147,483,647 (largest 4-byte integer)) and YYYY is
the year. TT is the resolution of the input/output file and tt is the
model time-step.</p>
<p>The last column indicates whether the files are needed/produced once per
run (1/run), or once per day (1/day), for each year (1/year) or for each
grid (1/grid).</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">[B]&nbsp;indicates&nbsp;files&nbsp;used&nbsp;with&nbsp;the&nbsp;CBL&nbsp;part&nbsp;of&nbsp;SUEWS&nbsp;(BLUEWS)&nbsp;and&nbsp;therefore&nbsp;are&nbsp;only&nbsp;needed/produced&nbsp;if&nbsp;this&nbsp;option&nbsp;is&nbsp;selected</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">[E]&nbsp;indicates&nbsp;files&nbsp;associated&nbsp;with&nbsp;ESTM&nbsp;storage&nbsp;heat&nbsp;flux&nbsp;models&nbsp;and&nbsp;therefore&nbsp;are&nbsp;only&nbsp;needed/produced&nbsp;if&nbsp;this&nbsp;option&nbsp;is&nbsp;selected</span></code></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Preparing to run the model</a><ul>
<li><a class="reference internal" href="#preparatory-reading">Preparatory reading</a></li>
<li><a class="reference internal" href="#decide-what-type-of-model-run-you-are-interested-in">Decide what type of model run you are interested in</a></li>
<li><a class="reference internal" href="#download-the-program-and-example-data-files">Download the program and example data files</a></li>
<li><a class="reference internal" href="#run-the-model-for-example-data">Run the model for example data</a></li>
<li><a class="reference internal" href="#preparation-of-data">Preparation of data</a><ul>
<li><a class="reference internal" href="#preparation-of-site-characteristics-and-model-parameters">Preparation of site characteristics and model parameters</a><ul>
<li><a class="reference internal" href="#land-cover">Land cover</a></li>
<li><a class="reference internal" href="#anthropogenic-heat-flux-q-sub-f">Anthropogenic heat flux (Q:sub:<cite>F</cite>)</a></li>
<li><a class="reference internal" href="#other-information">Other information</a></li>
<li><a class="reference internal" href="#data-entry">Data Entry</a></li>
</ul>
</li>
<li><a class="reference internal" href="#preparation-of-the-runcontrol-file">Preparation of the RunControl file</a></li>
<li><a class="reference internal" href="#preparation-of-the-meteorological-forcing-data">Preparation of the Meteorological forcing data</a></li>
<li><a class="reference internal" href="#preparation-of-the-initialconditions-file">Preparation of the InitialConditions file</a></li>
</ul>
</li>
<li><a class="reference internal" href="#run-the-model-for-your-site">Run the model for your site</a></li>
<li><a class="reference internal" href="#analyse-the-output">Analyse the output</a></li>
<li><a class="reference internal" href="#summary-of-files">Summary of files</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/6.prepare-to-run-the-model.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">SUEWS 2018a documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Sue Grimmond, Ting Sun.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.1.
    </div>
  </body>
</html>